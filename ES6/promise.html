<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 异步
        // setTimeout(function(){
        //     console.log('hahaha');
        // },3000)
        // console.log('hehehe');
        //同步
        // alert('hehehe');

        // 异步编程的解决方案
        // setTimeout(function(){
        //     console.log('1');
        //     setTimeout(function(){
        //         console.log('2');
        //         setTimeout(function(){
        //             console.log('3');
        //         },1000)
        //     },2000)
        // },3000)


        // 异步回调地狱
        // new Promise(function (resolve, reject) {
        //     setTimeout(function () {
        //         console.log('第一个请求');
        //         let data = 1;
        //         if (data) {
        //             resolve();
        //         }
        //     }, 3000)
        // }).then(function () {
        //     console.log('调用resolve成功');
        //     setTimeout(function () {
        //         console.log('第二个请求');
        //     }, 2000)
        // })
        // Promise异步编程的解决方案  将异步的请求以同步的方式表达

        // 三重循环
        // new Promise(function (resolve, reject) {
        //     setTimeout(function () {
        //         console.log('1');
        //         let data = 1;
        //         if (data) {
        //             resolve();
        //         }
        //     }, 3000)
        // }).then(function () {
        //     return new Promise(function (resolve, reject) {
        //         setTimeout(function () {
        //             console.log('2');
        //             resolve();
        //         }, 2000)
        //     })
        // }).then(function () {
        //     console.log('3');
        // })


        // new Promise(function (resolve, reject) {
        //     setTimeout(function () {
        //         console.log('1');
        //         let data = 1;
        //         if (data) {
        //             resolve();
        //         }else{
        //             reject();
        //         }
        //     }, 3000)
        // }).then(function () {
        //     console.log('调用resolve成功');
        // }).catch(function()
        // {
        //     console.log('失败');
        // })

        // setTimeout(function(){
        //     console.log('1');
        // },1000)
        // setTimeout(function(){
        //     console.log('2');
        // },2000)
        // setTimeout(function(){
        //     console.log('3');
        // },3000)
        let p1 = new Promise(function(resolve){
            setTimeout(function(){
                console.log(1);
                resolve();
            },2000)
        })
        let p2 = new Promise(function(resolve,reject){
            setTimeout(function(){
                console.log(2);
                reject();
            },1000)
        })
        let p3 = new Promise(function(resolve,reject){
            setTimeout(function(){
                console.log(3);
                reject();
            },3000)
        })

        // Promise.all([p1,p2,p3]).then(function(){
        //     console.log('所有请求成功')
        // }).catch(function(){
        //     console.log('失败')
        // });

        Promise.race([p1,p2,p3]).then(function(){
            console.log('成功')
        }).catch(function(){
            console.log('失败')
        })
    </script>
</body>

</html>